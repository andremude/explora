<section class="py-5 show-booking">
  <div class="container">
      <div class="row gx-4 gx-lg-5 align-items-center">
          <div class="col-md-5"><img class="card-img-top" src="https://images.unsplash.com/photo-1571492913849-fdc97148242d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80" alt="..." />
          </div>
          <div class="col-md-7 data">
              <h1 class="text-center title"><%= @bookings.tour.title_tour.upcase %></h1>
              <div class="fs-5 my-4">
                  <h4 class="text-decoration-line-through">Precio: S/<%= @bookings.tour.price %></h4>
              </div>
              <div class="fs-5 mb-4">
                  <h4 class="text-decoration-line-through">Fecha: <%= @bookings.start_date %> <%= @bookings.start_date %></h4>
              </div>
              <div class="fs-5 mb-4">
                  <h4 class="text-decoration-line-through">Acompañantes: <%= @bookings.quantity %> persona(s)</h4>
              </div>
              <p class="lead text-justify"><%= @bookings.tour.description %></p>
              <p class="lead text-justify"><%= @bookings.tour.services %></p>
              <div class="d-flex justify-content-around link-path my-5">
                  <%= link_to ' Editar', edit_booking_path, :class => "visible text-dark fas fa-pencil-alt my-2 btn btn-outline-success"%>
                  <%= link_to ' Eliminar', booking_path(@bookings), :class => "visible text-dark fas fa-times my-2 btn btn-outline-success", method: :delete, data: {confirm: "Seguro?"}%>
                  <%= link_to ' Imprimir', booking_path(@bookings, format: :pdf), :class => "visible text-dark fas fa-print my-2 btn btn-outline-success" %>
              </div>
          </div>
      </div>
  </div>

  <div class="container">
    <%# <p style="font-size:2rem;">Tus Acompañantes:</p> %>
    <%#cantidad =@bookings.quantity %>
    <%# actual_companion = Companion.where(booking_id: @bookings.id).count %>
    <%# actual_companion = 0 %>

    <%#(cantidad-actual_companion ).times do%>
    <%# <div class="container-fluid d-flex row mt-3"> %>
      <%#= simple_form_for(@companion, url: booking_companions_path(@bookings)) do |f| %>
            <%#= f.error_notification %>
            <%#= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>
            <%#= f.input :first_name,label: 'Primer nombre', placeholder: 'Ana' %>
            <%#= f.input :last_name,label: 'Segundo nombre', placeholder: 'Marcela' %>
            <%#= f.input :age,label: 'edad', placeholder: '20' %>
            <%#= f.input :document_number,label: 'Documento de Identidad', placeholder: '77414777' %>
            <%#= f.button :submit ,"Confirmar acompañantes" %>
            <%# end %>
    <%# </div> %>
    <%#end%>
    <%# incio ACORDEON %>
      <div class="accordion mt-4 " id="accordionExample">
        <div class="card w-100">
          <div class="card-header w-100" id="headingOne">
            <h2 class="mb-0">
              <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                <p style="font-size:2rem;">Tus Acompañantes:</p>
              </button>
            </h2>
          </div>

          <div id="collapseOne companions-create" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
            <div class="card-body">
              <%cantidad =@bookings.quantity %>
              <% actual_companion = Companion.where(booking_id: @bookings.id).count %>
              <%# INICIO formularios para CREAR acompañantes %>
              <%(cantidad-actual_companion ).times do%>
              <div class="container-fluid d-flex row mt-3">
                <%= simple_form_for(@companion, url: booking_companions_path(@bookings)) do |f| %>
                      <%= f.error_notification %>
                      <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>
                      <%= f.input :first_name,label: 'Primer nombre', placeholder: 'Ana' %>
                      <%= f.input :last_name,label: 'Apellido', placeholder: 'Marcela' %>
                      <%= f.input :age,label: 'edad', placeholder: '20' %>
                      <%= f.input :document_number,label: 'Documento de Identidad', placeholder: '77414777' %>
                      <%= f.button :submit ,"Confirmar acompañantes" %>
                      <% end %>
              </div>
              <%end%>
              <%# FIIIN formularios para CREAR acompañantes %>

              <%# formularios para VER acompañantes %>
              <p class="companion-pdf" style="font-size:1.5rem;">Acompañantes registrados:</p>
              <% @companions.each do |acompanante|%>
                <div class="container-fluid mt-3">
                  <div class="d-flex justify-content-around companion-pdf">
                    <div style=""><label for="">Nombre:</label><p> <%=acompanante.first_name%></p></div>
                    <div><label for="">Apellido:</label><p> <%=acompanante.last_name%></p></div>
                    <div><label for="">edad:</label><p> <%=acompanante.age%> </p></div>
                    <div><label for="">DNI:</label><p> <%=acompanante.document_number%></p></div>
                  </div>
                </div>
              <%end%>
              <%# formularios para VER acompañantes %>

            </div>
          </div>
        </div>
        <div class="card w-100 review">
          <div class="card-header" id="headingTwo">
            <h2 class="mb-0">
              <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                <p style="font-size:2rem;">Tu review</p>
              </button>
            </h2>
          </div>
          <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
            <div class="card-body">
               <div class="container-fluid d-flex row row mt-3">
                <%= simple_form_for(@review, url: booking_reviews_path(@bookings)) do |f| %>
                      <%= f.error_notification %>
                      <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>
                      <div class="col">
                        <%= f.input :content,label: 'Comentario', placeholder: 'Una bonita experiencia, lo recomendaria' %>
                      </div>
                      <div class="col">
                        <%= f.input :rating,label: 'Califacion ', placeholder: '1-5' %>
                      </div>
                       <%= f.input :photos,label: 'Fotos', as: :file, input_html: { multiple: true } %>
                      <%= f.button :submit ,"Enviar Review", class: "btn btn-success m-5", style: "font-size: 14px;" %>
                      <% end %>
              </div>
            </div>
          </div>
        </div>

      </div>
    <%# fin ACORDEON %>
  </div>
  <div class="container text-center link-path">
    <%= link_to 'Regresar', bookings_path, :class => "visible text-dark my-2 btn btn-outline-success mt-5"%>

  </div>
</section>
